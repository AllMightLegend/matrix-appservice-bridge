<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: bridge.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: bridge.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";

/**
 * @constructor
 */
function Bridge() {

}

Bridge.prototype.setMatrixSide = function(side) {
    // HS url, AS token, localpart, domain
};

Bridge.prototype.setRemoteSide = function(side) {

};

Bridge.prototype.run = function() {
    // listen on AS port
    // invoke onRun on remote side
};

/*
NOTES:

Two flows to consider:
 - Incoming remote events to outgoing matrix events
 - Incoming matrix events to outgoing remote events

Four API designs involved:
 - Asking the remote side to send an event
 - Asking the matrix side to send an event [Intent class]
 - Notification of new remote events
 - Notification of new matrix events [onAliasQuery, onEvent]

How much should we wrest control of the remote side from the developer? This
would mean forcing the dev to write a class meeting some interface which the
Bridge class can use to glue everything together. This interface needs to
specify the remaining 2 API designs. The interface needs to be able to map
arbitrary data to matrix data (rooms, users, etc).

Provide two modes of operation? One saying "hey meet this interface and we'll do
it all for you", the other being "here's the onXXX and Intent class, have fun!".

Interface operation:
  {
    onIncomingremoteEvent: function(event) {} &lt;--they implement these functions?
    sendremoteEvent: function(event) {} &lt;-----------`
  }

Main problem is that we need to know how to map from their IDs to matrix IDs and
know the capabilities of the network (e.g. do they understand invites?).

Make them implement their own "Intent" class? This will dissolve into just:
  onInvite(function(event) {
    var mapped = map(event);
    intent.invite(mapped);
  }
Perhaps with virtual user suppression included for free.

*/

module.exports = Bridge;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Bridge.html">Bridge</a></li><li><a href="BridgeStore.html">BridgeStore</a></li><li><a href="ClientFactory.html">ClientFactory</a></li><li><a href="Intent.html">Intent</a></li><li><a href="MatrixRoom.html">MatrixRoom</a></li><li><a href="MatrixUser.html">MatrixUser</a></li><li><a href="RemoteRoom.html">RemoteRoom</a></li><li><a href="RemoteUser.html">RemoteUser</a></li><li><a href="Request.html">Request</a></li><li><a href="RequestFactory.html">RequestFactory</a></li><li><a href="RoomBridgeStore.html">RoomBridgeStore</a></li><li><a href="UserBridgeStore.html">UserBridgeStore</a></li></ul><h3>Global</h3><ul><li><a href="global.html#get">get</a></li><li><a href="global.html#getRoomBridgeStore">getRoomBridgeStore</a></li><li><a href="global.html#getUserBridgeStore">getUserBridgeStore</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Wed Aug 26 2015 17:37:15 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
