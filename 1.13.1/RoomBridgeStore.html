<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: RoomBridgeStore</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: RoomBridgeStore</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>RoomBridgeStore<span class="signature">(db, opts)</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="RoomBridgeStore"><span class="type-signature"></span>new RoomBridgeStore<span class="signature">(db, opts)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Construct a store suitable for room bridging information. Data is stored
as <a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>s which have the following
<i>serialized</i> format:
<pre>
{
  id: "unique_id",      // customisable
  matrix_id: "room_id",
  remote_id: "remote_room_id",
  matrix: { serialised matrix room info },
  remote: { serialised remote room info },
  data: { ... any additional info ... }
}
</pre>
<p>If a unique 'id' is not given, the store will generate one by concatenating
the <code>matrix_id</code> and the <code>remote_id</code>. The delimiter
used is a property on this store and can be modified.</p>
<p>The structure of Entry objects means that it is efficient to select based
off the 'id', 'matrix_id' or 'remote_id'. Additional indexes can be added
manually.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>db</code></td>
            

            <td class="type">
            
                
<span class="param-type">Datastore</span>


            
            </td>

            

            

            <td class="description last">The connected NEDB database instance</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Options for this store.</td>
        </tr>

    
    </tbody>
</table>






    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>delimiter</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The delimiter between matrix and
remote IDs. Defaults to three spaces. If the schema of your remote IDs
allows spaces, you will need to change this.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line89">line 89</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="batchGetLinkedRemoteRooms"><span class="type-signature"></span>batchGetLinkedRemoteRooms<span class="signature">(matrixIds)</span><span class="type-signature"> &rarr; {Object.&lt;string, <a href="RemoteRoom.html">RemoteRoom</a>>}</span></h4>
    

    



<div class="description">
    A batched version of <code>getLinkedRemoteRooms</code>.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>matrixIds</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line255">line 255</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="RoomBridgeStore.html#getLinkedRemoteRooms">RoomBridgeStore#getLinkedRemoteRooms</a></li>
        </ul>
    </dd>
    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A mapping of room_id to RemoteRoom.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object.&lt;string, <a href="RemoteRoom.html">RemoteRoom</a>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getEntriesByLinkData"><span class="type-signature"></span>getEntriesByLinkData<span class="signature">(data)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>>}</span></h4>
    

    



<div class="description">
    Get a list of entries based on the link's data value.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The data values to retrieve based from.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line319">line 319</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A list of entries
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>store.linkRooms(matrixRoom, remoteRoom, { some_key: "some_val" });
store.getEntriesByLinkData({
    some_key: "some_val"
});</code></pre>



        
            

    

    
    <h4 class="name" id="getEntriesByMatrixId"><span class="type-signature"></span>getEntriesByMatrixId<span class="signature">(matrixId)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>>}</span></h4>
    

    



<div class="description">
    Get a list of entries based on the matrix_id of each entry.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>matrixId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line121">line 121</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getEntriesByMatrixIds"><span class="type-signature"></span>getEntriesByMatrixIds<span class="signature">(ids)</span><span class="type-signature"> &rarr; {Object.&lt;string, Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>>>}</span></h4>
    

    



<div class="description">
    A batch version of <code>getEntriesByMatrixId</code>.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ids</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;String></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line134">line 134</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves
to a map of room_id => Entry[]
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object.&lt;string, Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getEntriesByMatrixRoomData"><span class="type-signature"></span>getEntriesByMatrixRoomData<span class="signature">(data)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>>}</span></h4>
    

    



<div class="description">
    Get a list of entries based on a MatrixRoom data value.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The data values to retrieve based from.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line299">line 299</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A list of entries
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>matrixRoom.set("some_key", "some_val");
// store matrixRoom and then:
store.getEntriesByMatrixRoomData({
    some_key: "some_val"
});</code></pre>



        
            

    

    
    <h4 class="name" id="getEntriesByRemoteId"><span class="type-signature"></span>getEntriesByRemoteId<span class="signature">(remoteId)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>>}</span></h4>
    

    



<div class="description">
    Get a list of entries based on the remote_id of each entry.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>remoteId</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line155">line 155</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getEntriesByRemoteRoomData"><span class="type-signature"></span>getEntriesByRemoteRoomData<span class="signature">(data)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>>}</span></h4>
    

    



<div class="description">
    Get a list of entries based on a RemoteRoom data value.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The data values to retrieve based from.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line278">line 278</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A list of entries
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>remoteRoom.set("some_key", "some_val");
// store remoteRoom and then:
store.getEntriesByRemoteRoomData({
    some_key: "some_val"
});</code></pre>



        
            

    

    
    <h4 class="name" id="getEntryById"><span class="type-signature"></span>getEntryById<span class="signature">(id)</span><span class="type-signature"> &rarr; (nullable) {<a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a>}</span></h4>
    

    



<div class="description">
    Get an existing entry based on the provided entry ID.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">The ID of the entry to retrieve.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line109">line 109</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise which resolves to the entry or null.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getLinkedMatrixRooms"><span class="type-signature"></span>getLinkedMatrixRooms<span class="signature">(remoteId)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="MatrixRoom.html">MatrixRoom</a>>}</span></h4>
    

    



<div class="description">
    Get all entries with the given remote_id which have a Matrix room within.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>remoteId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line226">line 226</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="MatrixRoom.html">MatrixRoom</a>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getLinkedRemoteRooms"><span class="type-signature"></span>getLinkedRemoteRooms<span class="signature">(matrixId)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="RemoteRoom.html">RemoteRoom</a>>}</span></h4>
    

    



<div class="description">
    Get all entries with the given matrix_id which have a Remote room within.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>matrixId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line240">line 240</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="RemoteRoom.html">RemoteRoom</a>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getMatrixRoom"><span class="type-signature"></span>getMatrixRoom<span class="signature">(roomId)</span><span class="type-signature"> &rarr; (nullable) {<a href="MatrixRoom.html">MatrixRoom</a>}</span></h4>
    

    



<div class="description">
    Get an entry's Matrix room based on the provided room_id. The entry MUST have
an 'id' of the room_id and there MUST be a Matrix room contained within the
entry for this to return.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>roomId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line216">line 216</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="RoomBridgeStore.html#setMatrixRoom">RoomBridgeStore#setMatrixRoom</a></li>
        </ul>
    </dd>
    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="MatrixRoom.html">MatrixRoom</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="linkRooms"><span class="type-signature"></span>linkRooms<span class="signature">(matrixRoom, remoteRoom, data<span class="signature-attributes">opt</span>, linkId<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Create a link between a matrix room and remote room. This will create an entry with:
<ul>
<li>The matrix_id set to the matrix room ID.</li>
<li>The remote_id set to the remote room ID.</li>
<li>The id set to the id value given OR a concatenation of the matrix and remote IDs
if one is not provided.</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>matrixRoom</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="MatrixRoom.html">MatrixRoom</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The matrix room</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>remoteRoom</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="RemoteRoom.html">RemoteRoom</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The remote room</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Information about this mapping.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>linkId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The id value to set. If not given, a unique ID will be
created from the matrix_id and remote_id.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line177">line 177</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="removeEntriesByLinkData"><span class="type-signature"></span>removeEntriesByLinkData<span class="signature">(data)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Remove entries based on the link's data value.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The data to match.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line405">line 405</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>store.linkRooms(matrixRoom, remoteRoom, { a_key: "a_val" });
store.removeEntriesByLinkData({
    a_key: "a_val"
});</code></pre>



        
            

    

    
    <h4 class="name" id="removeEntriesByMatrixRoomData"><span class="type-signature"></span>removeEntriesByMatrixRoomData<span class="signature">(data)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Remove entries based on matrix room data.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The data to match.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line373">line 373</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>matrixRoom.set("a_key", "a_val");
// store matrixRoom and then:
store.removeEntriesByMatrixRoomData({
    a_key: "a_val"
});</code></pre>



        
            

    

    
    <h4 class="name" id="removeEntriesByMatrixRoomId"><span class="type-signature"></span>removeEntriesByMatrixRoomId<span class="signature">(matrixId)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Remove entries with this matrix room id.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>matrixId</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The matrix id.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line390">line 390</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>new MatrixRoom("!foobar:matrix.org");
// store the MatrixRoom and then:
store.removeEntriesByMatrixRoomId("!foobar:matrix.org");</code></pre>



        
            

    

    
    <h4 class="name" id="removeEntriesByRemoteRoomData"><span class="type-signature"></span>removeEntriesByRemoteRoomData<span class="signature">(data)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Remove entries based on remote room data.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The data to match.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line340">line 340</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>remoteRoom.set("a_key", "a_val");
// store remoteRoom and then:
store.removeEntriesByRemoteRoomData({
    a_key: "a_val"
});</code></pre>



        
            

    

    
    <h4 class="name" id="removeEntriesByRemoteRoomId"><span class="type-signature"></span>removeEntriesByRemoteRoomId<span class="signature">(remoteId)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Remove entries with this remote room id.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>remoteId</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The remote id.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line357">line 357</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>new RemoteRoom("foobar");
// store the RemoteRoom and then:
store.removeEntriesByRemoteRoomId("foobar");</code></pre>



        
            

    

    
    <h4 class="name" id="removeEntryById"><span class="type-signature"></span>removeEntryById<span class="signature">(id)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Remove an existing entry based on the provided entry ID.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">The ID of the entry to remove.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line420">line 420</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>store.removeEntryById("anid");</code></pre>



        
            

    

    
    <h4 class="name" id="setMatrixRoom"><span class="type-signature"></span>setMatrixRoom<span class="signature">(matrixRoom)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Create an entry with only a matrix room. Sets the 'id' of the entry to the
Matrix room ID. If an entry already exists with this 'id', it will be replaced.
This function is useful if you just want to store a room with some data and not
worry about any mappings.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>matrixRoom</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="MatrixRoom.html">MatrixRoom</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line201">line 201</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="RoomBridgeStore.html#getMatrixRoom">RoomBridgeStore#getMatrixRoom</a></li>
        </ul>
    </dd>
    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="upsertEntry"><span class="type-signature"></span>upsertEntry<span class="signature">(entry)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Insert an entry, clobbering based on the ID of the entry.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>entry</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="RoomBridgeStore.html#~Entry">RoomBridgeStore~Entry</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line99">line 99</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
    

    
        <h3 class="subsection-title">Type Definitions</h3>

        
                
<h4 class="name" id="~Entry">Entry</h4>




<div class="description">
    Construct a new RoomBridgeStore Entry.
</div>







    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                
                </td>
            

            

            <td class="description last">The unique ID for this entry.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>matrix</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="MatrixRoom.html">MatrixRoom</a></span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                
                </td>
            

            

            <td class="description last">The matrix room, if applicable.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>remote</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="RemoteRoom.html">RemoteRoom</a></span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                
                </td>
            

            

            <td class="description last">The remote room, if applicable.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                
                </td>
            

            

            <td class="description last">Information about this mapping, which may be an empty.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="components_room-bridge-store.js.html">components/room-bridge-store.js</a>, <a href="components_room-bridge-store.js.html#line426">line 426</a>
    </li></ul></dd>
    

    

    

    
</dl>






            
    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AgeCounters.html">AgeCounters</a></li><li><a href="AppServiceBot.html">AppServiceBot</a></li><li><a href="Bridge.html">Bridge</a></li><li><a href="BridgeContext.html">BridgeContext</a></li><li><a href="BridgeInternalError.html">BridgeInternalError</a></li><li><a href="global.html#BridgeStore">BridgeStore</a></li><li><a href="Cli.html">Cli</a></li><li><a href="ClientFactory.html">ClientFactory</a></li><li><a href="ClientRequestCache.html">ClientRequestCache</a></li><li><a href="global.html#ConfigValidator">ConfigValidator</a></li><li><a href="EventBridgeStore.html">EventBridgeStore</a></li><li><a href="EventNotHandledError.html">EventNotHandledError</a></li><li><a href="EventQueue.html">EventQueue</a></li><li><a href="EventQueueNone.html">EventQueueNone</a></li><li><a href="EventQueuePerRoom.html">EventQueuePerRoom</a></li><li><a href="EventQueueSingle.html">EventQueueSingle</a></li><li><a href="EventTooOldError.html">EventTooOldError</a></li><li><a href="EventUnknownError.html">EventUnknownError</a></li><li><a href="ForeignNetworkError.html">ForeignNetworkError</a></li><li><a href="Intent.html">Intent</a></li><li><a href="MatrixRoom.html">MatrixRoom</a></li><li><a href="MatrixUser.html">MatrixUser</a></li><li><a href="MembershipCache.html">MembershipCache</a></li><li><a href="PrometheusMetrics.html">PrometheusMetrics</a></li><li><a href="RemoteRoom.html">RemoteRoom</a></li><li><a href="RemoteUser.html">RemoteUser</a></li><li><a href="Request.html">Request</a></li><li><a href="RequestFactory.html">RequestFactory</a></li><li><a href="RoomBridgeStore.html">RoomBridgeStore</a></li><li><a href="RoomLinkValidator.html">RoomLinkValidator</a></li><li><a href="RoomUpgradeHandler.html">RoomUpgradeHandler</a></li><li><a href="StateLookup.html">StateLookup</a></li><li><a href="StoredEvent.html">StoredEvent</a></li><li><a href="UserBridgeStore.html">UserBridgeStore</a></li></ul><h3>Global</h3><ul><li><a href="global.html#defaultMessage">defaultMessage</a></li><li><a href="global.html#wrap">wrap</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Fri Jun 26 2020 10:17:26 GMT+0100 (British Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>